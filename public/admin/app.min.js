!function(){angular.module("app",["ui.router","ngResource","LocalStorageModule","ngMessages","pascalprecht.translate","ngSanitize","ui.bootstrap","dndLists","colorpicker.module","ui.bootstrap.contextMenu","angularFileUpload","ngAnimate","uiSwitch","ui.select"]).run(["$rootScope","Auth","Router","CONSTANT","$state",function(t,e,o,n,a){t.$state=a,t.$on("$stateChangeStart",function(t,n){n.requiresAuth&&!e.isLoggedIn()&&o.toLogin()}),t.$on("$viewContentLoaded",function(t){$.AdminLTE.layout.activate()})}])}();
!function(){angular.module("app").constant("CONSTANT",{API:"http://localhost:3000",CLIENT_SITE:"http://localhost:8080",HTML5:!0})}();
!function(){angular.module("app").config(["$translateProvider",function(e){e.preferredLanguage("en"),e.useSanitizeValueStrategy("sanitize")}])}();
!function(){angular.module("app").config(["$provide","$httpProvider",function(e,t){e.factory("HttpInterceptor",["$q","dataStorage",function(e,t){return{request:function(n){var r=t.getToken();return r&&(n.headers["access-token"]=r["access-token"],n.headers.client=r.client,n.headers.uid=r.uid),n||e.when(n)},response:function(e){var n=e.headers();return n["access-token"]&&t.setToken(n),e}}}]),t.interceptors.push("HttpInterceptor")}])}();
!function(){angular.module("app").config(["$stateProvider","$urlRouterProvider","$locationProvider","CONSTANT",function(e,t,r,a){e.state("app",{abstract:!0,url:"",views:{}}).state("app.login",{url:"/login",views:{"content@":{templateUrl:"pages/login/index.html",controller:"Login"}}}).state("app.admin",{abstract:!0,requiresAuth:!0,url:"",views:{"header@app.admin":{templateUrl:"components/header/index.html",controller:"Header"},"sidebar@app.admin":{templateUrl:"components/sidebar/index.html",controller:"Sidebar"},"content@":{templateUrl:"pages/index.html"},"footer@app.admin":{templateUrl:"components/footer/index.html"}}}).state("app.admin.dashboard",{requiresAuth:!0,url:"/dashboard",views:{"wrapper@app.admin":{templateUrl:"pages/dashboard/index.html",controller:"Dashboard"},"listProjects@app.admin.dashboard":{templateUrl:"components/list-project/index.html",controller:"ListProjects"}}}).state("app.admin.projects",{requiresAuth:!0,url:"/projects",views:{"wrapper@app.admin":{templateUrl:"pages/projects/index.html",controller:"Projects"},"listProjects@app.admin.projects":{templateUrl:"components/list-project/index.html",controller:"ListProjects"}}}).state("app.admin.projects.show",{requiresAuth:!0,url:"/:id/show",views:{"wrapper@app.admin":{templateUrl:"pages/projects/show-project/index.html",controller:"ShowProjects"}}}).state("app.admin.projects.edit",{requiresAuth:!0,url:"/:id/edit",views:{"wrapper@app.admin":{templateUrl:"pages/projects/edit-project/index.html",controller:"EditProjects"}}}).state("app.admin.projects.add",{requiresAuth:!0,url:"/add",views:{"wrapper@app.admin":{templateUrl:"pages/projects/add-project/index.html",controller:"AddProjects"}}}).state("app.admin.projects.uploads",{requiresAuth:!0,url:"/:id/uploads",views:{"wrapper@app.admin":{templateUrl:"pages/projects/upload/index.html",controller:"UploadProjects"}}}).state("app.admin.projects.table",{requiresAuth:!0,url:"/:id/table",views:{"wrapper@app.admin":{templateUrl:"pages/projects/table-project/index.html",controller:"TableProjects"}}}).state("app.admin.projects.users",{requiresAuth:!0,url:"/:projectId/users/:roleId",views:{"wrapper@app.admin":{templateUrl:"pages/projects/user-project/index.html",controller:"UserRoleProjects"}}}).state("app.admin.projects.roles",{requiresAuth:!0,url:"/:projectId/roles",views:{"wrapper@app.admin":{templateUrl:"pages/projects/role-project/index.html",controller:"RoleProjects"}}}).state("app.admin.projects.design",{requiresAuth:!0,url:"/:projectId/design",views:{"header@app.admin.projects.design":{templateUrl:"components/header/index.html",controller:"Header"},"content@":{templateUrl:"pages/projects/design-project/index.html",controller:"DesignProjects"}}}).state("app.admin.clients",{requiresAuth:!0,url:"/clients",views:{"wrapper@app.admin":{templateUrl:"pages/clients/index.html",controller:"Clients"}}}).state("app.admin.clients.add",{requiresAuth:!0,url:"/add",views:{"wrapper@app.admin":{templateUrl:"pages/clients/add-client/index.html",controller:"AddClients"}}}).state("app.admin.clients.edit",{requiresAuth:!0,url:"/:id/edit",views:{"wrapper@app.admin":{templateUrl:"pages/clients/edit-client/index.html",controller:"EditClients"}}}).state("app.admin.users",{requiresAuth:!0,url:"/users",views:{"wrapper@app.admin":{templateUrl:"pages/users/index.html",controller:"Users"}}}).state("app.admin.users.add",{requiresAuth:!0,url:"/add",views:{"wrapper@app.admin":{templateUrl:"pages/users/add-user/index.html",controller:"AddUsers"}}}).state("app.admin.users.show",{requiresAuth:!0,url:"/:id/show",views:{"wrapper@app.admin":{templateUrl:"pages/users/show-user/index.html",controller:"ShowUsers"}}}).state("app.admin.users.edit",{requiresAuth:!0,url:"/:id/edit",views:{"wrapper@app.admin":{templateUrl:"pages/users/edit-user/index.html",controller:"EditUsers"}}}),t.otherwise("/login"),a.HTML5&&r.html5Mode(!0)}])}();
!function(){angular.module("app").config(["localStorageServiceProvider",function(e){e.setPrefix("clisss_admin").setStorageType("sessionStorage").setNotify(!0,!0)}])}();
!function(e){var a=function(){return{iconComponent:"fa fa-square-o",type:"button",label:"Button",buttonType:"button",icon:"lock",action:{type:"login",data:{idTableToCheck:"",dataToCheck:{}},todoTrue:{type:"alert",data:{}},todoFalse:{type:"alert",data:{}}},properties:{classes:[{name:"alignSelfAuto",value:!0},{name:"selected",value:!1}],flexStyles:[{name:"flex-basis",value:"25%"},{name:"flex-grow",value:"0"},{name:"flex-shrink",value:"1"}],styles:[{name:"padding",value:"6px 12px"},{name:"text-align",value:"left"},{name:"color",value:"black"},{name:"font-size",value:"16px"},{name:"background",value:"gray"}]},privacy:[]}}();e.Button=a}(__clisss||(__clisss={}));
!function(e){var a=function(){return{iconComponent:"fa fa-check-square-o",data:{table:"default",column:"default"},type:"checkbox",label:"checkbox",content:"Example Text Here",model:"",isDB:!1,properties:{classes:[{name:"alignSelfAuto",value:!0},{name:"selected",value:!1}],flexStyles:[{name:"flex-basis",value:"25%"},{name:"flex-grow",value:"0"},{name:"flex-shrink",value:"1"}],styles:[{name:"margin-top",value:"10px"},{name:"margin-bottom",value:"10px"},{name:"color",value:"black"},{name:"font-size",value:"16px"}]},privacy:[]}}();e.Checkbox=a}(__clisss||(__clisss={}));
!function(e){var a=function(){return{iconComponent:"fa fa-object-group",type:"form",action:"",method:"",bgImageSrc:"",children:[{children:[]}],model:"",properties:{classes:[{name:"directionColumn",value:!0},{name:"nowrapFlex",value:!0},{name:"flexStartContent",value:!0},{name:"alignItemStretch",value:!0},{name:"alignContentStretch",value:!0},{name:"alignSelfAuto",value:!0},{name:"selected",value:!1}],flexStyles:[{name:"flex-basis",value:"25%"},{name:"flex-grow",value:"0"},{name:"flex-shrink",value:"1"}],styles:[{name:"border",value:"1px dotted #ccc"},{name:"background-image",value:""}]},privacy:[]}}();e.Form=a}(__clisss||(__clisss={}));
!function(e){var a=function(){return{iconComponent:"fa fa-header",data:{table:"default",column:"default"},type:"heading",label:"heading",content:"Example Text Here",model:"",isDB:!1,properties:{heading:"h1",classes:[{name:"alignSelfAuto",value:!0},{name:"selected",value:!1}],flexStyles:[{name:"flex-basis",value:"25%"},{name:"flex-grow",value:"0"},{name:"flex-shrink",value:"1"}],styles:[{name:"color",value:"black"},{name:"margin-top",value:"20px"},{name:"margin-bottom",value:"10px"}]},privacy:[]}}();e.Heading=a}(__clisss||(__clisss={}));
!function(e){var a=function(){return{iconComponent:"fa fa-picture-o",type:"image",label:"Image",resource:{attributes:{image:{url:""}}},properties:{classes:[{name:"alignSelfAuto",value:!0},{name:"selected",value:!1}],flexStyles:[{name:"flex-basis",value:"25%"},{name:"flex-grow",value:"0"},{name:"flex-shrink",value:"1"}],styles:[{name:"width",value:"100%"},{name:"height",value:"auto"}]},privacy:[]}}();e.Image=a}(__clisss||(__clisss={}));
!function(e){var a=function(){return{iconComponent:"fa fa-pencil-square-o",data:{table:"default",column:"default"},type:"input",label:"input",content:"",inputMethod:"post",placeHolder:"Please input your text",inputType:"text",model:"",isDB:!1,properties:{classes:[{name:"alignSelfAuto",value:!0},{name:"selected",value:!1}],flexStyles:[{name:"flex-basis",value:"25%"},{name:"flex-grow",value:"0"},{name:"flex-shrink",value:"1"}],styles:[{name:"padding",value:"6px 12px"},{name:"height",value:"34px"},{name:"text-align",value:"left"},{name:"color",value:"black"},{name:"font-size",value:"16px"}]},privacy:[]}}();e.Input=a}(__clisss||(__clisss={}));
!function(e){var a=function(){return{iconComponent:"fa fa-tag",data:{table:"default",column:"default"},type:"label",label:"label",content:"Example Text Here",model:"",isDB:!1,properties:{classes:[{name:"alignSelfAuto",value:!0},{name:"selected",value:!1}],flexStyles:[{name:"flex-basis",value:"25%"},{name:"flex-grow",value:"0"},{name:"flex-shrink",value:"1"}],styles:[{name:"color",value:"black"},{name:"font-size",value:"15px"},{name:"display",value:"inline-block"},{name:"max-width",value:"100%"},{name:"margin-bottom",value:"5px"},{name:"font-weight",value:"700"}]},privacy:[]}}();e.Label=a}(__clisss||(__clisss={}));
!function(e){var a=function(){return{iconComponent:"fa fa-bars",data:{table:"default",column:"default"},type:"list",label:"List",items:[{text:"Item 1"},{text:"Item 2"},{text:"Item 3"}],model:"",isDB:!1,properties:{listType:"ul",classes:[{name:"alignSelfAuto",value:!0},{name:"selected",value:!1}],flexStyles:[{name:"flex-basis",value:"25%"},{name:"flex-grow",value:"0"},{name:"flex-shrink",value:"1"}],styles:[{name:"margin-bottom",value:"5px"},{name:"text-align",value:"left"},{name:"color",value:"black"},{name:"font-size",value:"16px"}]},privacy:[]}}();e.List=a}(__clisss||(__clisss={}));
!function(a){var e=function(){return{iconComponent:"fa fa-paragraph",data:{table:"default",column:"default"},type:"paragraph",label:"Paragraph",content:"Paragraph Text",model:"",isDB:!1,properties:{classes:[{name:"alignSelfAuto",value:!0},{name:"selected",value:!1}],flexStyles:[{name:"flex-basis",value:"25%"},{name:"flex-grow",value:"0"},{name:"flex-shrink",value:"1"}],styles:[{name:"margin",value:"0 0 10px"},{name:"text-align",value:"left"},{name:"color",value:"black"},{name:"font-size",value:"16px"}]},privacy:[]}}();a.Paragraph=e}(__clisss||(__clisss={}));
!function(e){var a=function(){return{iconComponent:"fa fa-dot-circle-o",data:{table:"default",column:"default"},type:"radio",label:"radio",content:"Example Text Here",model:"",isDB:!1,groupName:"groupName",properties:{classes:[{name:"alignSelfAuto",value:!0},{name:"selected",value:!1}],flexStyles:[{name:"flex-basis",value:"25%"},{name:"flex-grow",value:"0"},{name:"flex-shrink",value:"1"}],styles:[{name:"margin-top",value:"10px"},{name:"margin-bottom",value:"10px"},{name:"color",value:"black"},{name:"font-size",value:"16px"}]},privacy:[]}}();e.Radio=a}(__clisss||(__clisss={}));
!function(e){var a=function(){return{iconComponent:"fa fa-caret-square-o-down",data:{table:"default",column:"default"},type:"select",label:"Select",options:[{value:"Options 1"},{value:"Options 2"}],model:"",isDB:!1,properties:{listType:"ul",classes:[{name:"alignSelfAuto",value:!0},{name:"selected",value:!1}],flexStyles:[{name:"flex-basis",value:"25%"},{name:"flex-grow",value:"0"},{name:"flex-shrink",value:"1"}],styles:[{name:"height",value:"34px"},{name:"background",value:"#fff"},{name:"color",value:"black"},{name:"font-size",value:"15px"}]},privacy:[]}}();e.Select=a}(__clisss||(__clisss={}));
var __clisss;!function(e){var a=function(){return{iconComponent:"fa fa-object-group",type:"stacked",bgImageSrc:"",children:[{children:[]}],model:"",properties:{classes:[{name:"directionColumn",value:!0},{name:"nowrapFlex",value:!0},{name:"flexStartContent",value:!0},{name:"alignItemStretch",value:!0},{name:"alignContentStretch",value:!0},{name:"alignSelfAuto",value:!0},{name:"selected",value:!1}],flexStyles:[{name:"flex-basis",value:"25%"},{name:"flex-grow",value:"0"},{name:"flex-shrink",value:"1"}],styles:[{name:"border",value:"1px dotted #ccc"},{name:"padding",value:"10px"},{name:"background-image",value:""}]},privacy:[]}}();e.Stacked=a}(__clisss||(__clisss={}));
!function(e){var l=function(){return{iconComponent:"fa fa-table",type:"table",label:"Table",dbTable:null,dbColumns:[{name:"Column DB 1",onFocus:!1,operation:null},{name:"Column DB 2",onFocus:!1,operation:null}],columnNo:2,rowNo:2,columns:[{name:"Column Name 1"},{name:"Column Name 2"}],rows:[{data:[{value:"Value column 1"},{value:"Value column 2"}]},{data:[{value:"Value column 1"},{value:"Value column 2"}]}],model:"",isDB:!1,properties:{listType:"ul",classes:[{name:"alignSelfAuto",value:!0},{name:"selected",value:!1}],flexStyles:[{name:"flex-basis",value:"25%"},{name:"flex-grow",value:"0"},{name:"flex-shrink",value:"1"}],styles:[{name:"margin-bottom",value:"5px"},{name:"text-align",value:"left"},{name:"color",value:"black"},{name:"font-size",value:"16px"}]},privacy:[]}}();e.Table=l}(__clisss||(__clisss={}));
!function(e){var a=function(){return{iconComponent:"fa fa-newspaper-o",data:{table:"default",column:"default"},type:"textarea",label:"textarea",content:"",isDB:!1,placeHolder:"Please input your text",model:"",properties:{classes:[{name:"alignSelfAuto",value:!0},{name:"selected",value:!1}],flexStyles:[{name:"flex-basis",value:"25%"},{name:"flex-grow",value:"0"},{name:"flex-shrink",value:"1"}],styles:[{name:"height",value:"64px"},{name:"padding",value:"6px 12px"},{name:"text-align",value:"left"},{name:"color",value:"black"},{name:"font-size",value:"16px"}]},privacy:[]}}();e.Textarea=a}(__clisss||(__clisss={}));
!function(){angular.module("app").filter("moment",function(){return function(n,t){var o=void 0;return n&&(o=moment(n,t).format(t)),o}})}();
!function(){angular.module("app").controller("App",["$scope","$translate","Auth","Router",function(n,o,t,u){}])}();
!function(){angular.module("app").directive("buttonCustom",function(){return{restrict:"E",templateUrl:"components/nodes-properties/button.html",controller:["$scope",function(e){e.deleteStyle=function(t){e.models.selected.properties.styles.splice(t,1)},e.createStyle=function(){var t={name:"",value:""};e.models.selected.properties.styles.push(t)}}]}})}();
!function(){angular.module("app").directive("checkbox",function(){return{restrict:"E",templateUrl:"components/nodes-properties/checkbox.html",controller:["$scope",function(e){e.deleteStyle=function(t){e.models.selected.properties.styles.splice(t,1)},e.createStyle=function(){var t={name:"",value:""};e.models.selected.properties.styles.push(t)}}]}})}();
!function(){angular.module("app").directive("columnInstanceTableQueried",["api","InstanceTable",function(e,t){return{restrict:"E",scope:{instanceTables:"=",projectID:"=",pageSelecting:"=",columnTableQueried:"=",operations:"=",modelSelected:"=",tables:"="},templateUrl:"components/column-instance-table/column-instance-table.html",controller:["$scope",function(e){e.loadColumnFromOperations=function(l,o){e.indexCurrentOperator=o,e.currentOperatorTable=l,e.columnOperator=angular.fromJson(l.attributes.query),_.each(e.tables,function(o){o.attributes.name==l.attributes.ds_name&&t.loadColumnTable(e.pageSelecting.id,o).then(function(){is.object(l.attributes.query)||(l.attributes.query=angular.fromJson(l.attributes.query)),e.columnTableQueried=_.intersectionBy(t.data_column,l.attributes.query.rules,function(e){return e.id})})})},e.addValueModelSelected=function(t){e.modelSelected.data.table=e.currentOperatorTable.attributes.ds_name,e.modelSelected.data.column=t.attributes.name,e.modelSelected.model="@DB."+e.modelSelected.data.table+"."+e.modelSelected.data.column,e.modelSelected.content=e.modelSelected.model,"input"===e.modelSelected.type&&(e.modelSelected.placeHolder=e.modelSelected.content),"button"===e.modelSelected.type&&(e.modelSelected.label=e.modelSelected.data),"list"===e.modelSelected.type&&(e.modelSelected.items=[{text:e.modelSelected.data}]),"select"===e.modelSelected.type&&(e.modelSelected.options=[{value:e.modelSelected.data}]),"table"===e.modelSelected.type&&_.each(e.modelSelected.dbColumns,function(t){t.onFocus&&(t.name=e.modelSelected.data.column,t.operation=e.currentOperatorTable,console.log(e.modelSelected))})}}]}}])}();
!function(){angular.module("app").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,o,n,r){r.$validators.compareTo=function(o){return o==e.otherModelValue},e.$watch("otherModelValue",function(){r.$validate()})}}})}();
!function(){angular.module("app").directive("conditionFollow",["$compile",function(e){return{restrict:"E",scope:{query:"=",fields:"="},templateUrl:"components/condition-follow/condition-follow.html",compile:function(n){var o,a;return o=n.contents().remove(),function(n,t){n.conditions=[{name:"and"},{name:"or"}],n.date="",n.operators=[{name:"not equal",value:"!="},{name:"equal",value:"=="},{name:"less",value:"<"},{name:"greater",value:">"},{name:"greater or equal",value:">="},{name:"less or equal",value:"<="}],n.addCondition=function(){n.query.rules.push({})},n.removeCondition=function(e){n.query.rules.splice(e,1)},n.validateType=function(e){_.each(n.fields,function(n){n.name==e.nameColumn&&(e.type=n.type)})},a||(a=e(o)),t.append(a(n,function(e){return e}))}}}}])}();
!function(){angular.module("app").directive("configAction",["api","InstanceTable",function(e,o){return{restrict:"E",scope:{instanceTables:"=",projectID:"=",pageSelecting:"=",columnTableQueried:"=",operations:"=",modelSelected:"=",tables:"=",pages:"=",fields:"="},templateUrl:"components/config-action/config-action.html",controller:["$scope",function(e){e.conditionFollow=angular.fromJson('{"query": {"condition": "and","rules":[]}}'),e.isToNextTodoTrue=!1,e.fields=[],e.reFormatAction=function(o){e.modelSelected.action={type:o,data:{},todoTrue:{type:"alert",data:{}},todoFalse:{type:"alert",data:{}}}},e.reFormatTodoTrue=function(o){e.modelSelected.action.todoTrue={type:o,data:{}}},e.initDataForPostData=function(){e.modelSelected.action.todoTrue.afterPostData={type:"link",data:""},e.modelSelected.action.todoTrue.data={rows:[{table_id:e.modelSelected.action.data.idTableToCheck}]}},e.getColumnFromTable=function(t){e.tableFromOption=angular.fromJson(t),e.modelSelected.action.data.idTableToCheck=e.tableFromOption.id,o.loadColumnTable(e.pageSelecting.id,e.tableFromOption).then(function(){_.each(o.data_column,function(o){e.fields.push({id:o.id,name:o.attributes.name,type:o.attributes.content_type})})})},e.nextStep=function(){e.modelSelected.action.data.tableToCheck=e.tableFromOption.attributes.name,e.modelSelected.action.data.columnCodition={};var o=[];_.each(e.conditionFollow.query.rules,function(t){e.modelSelected.action.data.columnCodition[t.nameColumn]=t.nameColumn;var a={};a[t.operator]=[{var:t.nameColumn},t.value],o.push(a)});var t={};t[e.conditionFollow.query.condition]=o,e.modelSelected.action.data.columnToCheck=t,e.isToNextTodoTrue=!0}}]}}])}();
!function(){angular.module("app").directive("configuration",["api","InstanceTable",function(e,t){return{restrict:"E",scope:{projectID:"=",pageSelecting:"=",operations:"=",operationsGet:"=",tables:"=",instanceTables:"="},templateUrl:"components/configuration/configuration.html",controller:["$scope",function(n){var o='{"name": "", "ds_name": "", "stage": "init" , "operation_type": "get", "query": {"condition": "AND","rules":[]}}';n.json=null,n.filter=angular.fromJson(o),n.filter.stage="",n.filter.name="",n.filter.operation_type="",n.$watch("filter",function(e){n.json=angular.toJson(e,null,2)},!0),n.setTableFromOption=function(e){n.tableFromOption=angular.fromJson(e),n.fields=[],t.loadColumnTable(n.pageSelecting.id,n.tableFromOption).then(function(){_.each(t.data_column,function(e){n.fields.push({id:e.id,name:e.attributes.name,type:e.attributes.content_type})})}),n.filter=angular.fromJson(o),n.filter.ds_name=n.tableFromOption.attributes.name},n.saveAliasPage=function(t){var o=angular.fromJson(t),a=angular.fromJson(n.json);is.not.empty(a.name)?e.projectOperation().save({project_id:n.projectID,page_id:n.pageSelecting.id,operation:{name:n.filter.name,ds_name:o.attributes.name,stage:"init",operation_type:"get",query:'{"condition": "AND","rules":[]}'}}).$promise.then(function(e){n.operationsGet.push(e.data),n.operations.push(e.data),n.filter.name="",swal("Success!","Successfully saved instance table conditions","success")}).catch(function(e){swal("Error!",e.data.errors[0].source.pointer+" "+e.data.errors[0].detail,"error")}):swal("Error!","Error, please fill name ","error")},n.updateAliasPage=function(t,o){is.not.empty(t.attributes.name)?e.projectOperation().update({project_id:n.projectID,page_id:n.pageSelecting.id,id:t.id,operation:{name:t.attributes.name,ds_name:t.attributes.ds_name,stage:"init",operation_type:"get",query:angular.toJson(t.attributes.query)}}).$promise.then(function(e){_.each(n.operations,function(o,a){t.id===o.id&&(n.operations[a]=e.data,console.log(n.operations[a]))}),n.operationsGet[o]=e.data,swal("Success!","Successfully updated instance table conditions","success")}).catch(function(e){console.log(e),swal("Error!",e.data.errors[0].source.pointer+" "+e.data.errors[0].detail,"error")}):swal("Error!","Please fill your name operation","error")},n.deleteAliasPage=function(t,o){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1,html:!1},function(){e.projectOperation().destroy({project_id:n.projectID,page_id:n.pageSelecting.id,id:t.id}).$promise.then(function(e){_.each(n.operations,function(e,o){t.id===e.id&&n.operations.splice(o,1)}),n.operationsGet[o]=null,n.operationsGet=_.compact(n.operationsGet),swal("Success!","Successfully delete instance table conditions","success")}).catch(function(e){console.log(e),swal("Error!","Error in deleted instance table conditions","error")})})}}]}}])}();
!function(){angular.module("app").directive("formCustom",function(){return{restrict:"E",templateUrl:"components/nodes-properties/form.html",controller:["$scope",function(e){e.deleteStyle=function(t){e.models.selected.properties.styles.splice(t,1)},e.createStyle=function(){var t={name:"",value:""};e.models.selected.properties.styles.push(t)}}]}})}();
!function(){angular.module("app").directive("heading",function(){return{restrict:"E",templateUrl:"components/nodes-properties/heading.html",controller:["$scope",function(e){e.deleteStyle=function(t){e.models.selected.properties.styles.splice(t,1)},e.createStyle=function(){var t={name:"",value:""};e.models.selected.properties.styles.push(t)}}]}})}();
!function(){angular.module("app").directive("imageCustom",function(){return{restrict:"E",templateUrl:"components/nodes-properties/image.html",controller:["$scope",function(e){e.deleteStyle=function(t){e.models.selected.properties.styles.splice(t,1)},e.createStyle=function(){var t={name:"",value:""};e.models.selected.properties.styles.push(t)},e.getPictureName=function(e){console.log(e)}}]}})}();
!function(){angular.module("app").directive("inputCustom",function(){return{restrict:"E",templateUrl:"components/nodes-properties/input.html",controller:["$scope",function(e){e.deleteStyle=function(t){e.models.selected.properties.styles.splice(t,1)},e.createStyle=function(){var t={name:"",value:""};e.models.selected.properties.styles.push(t)}}]}})}();
!function(){angular.module("app").directive("listInstanceTableConfigured",["$compile","api","InstanceTable","$q",function(e,t,a,n){return{restrict:"E",scope:{table:"=",projectID:"=",pageSelecting:"=",instanceTables:"=",tables:"="},templateUrl:"components/configuration/list-instance-table-configured.html",compile:function(t){var l,u;return l=t.contents().remove(),function(t,i){t.table.attributes.query=angular.fromJson(t.table.attributes.query);var o=[];t.fields=[],_.each(t.tables,function(e){t.table.attributes.ds_name===e.attributes.name&&o.push(a.loadColumnTable(t.pageSelecting.id,e))}),n.all(o).then(function(e){_.each(e,function(e){_.each(e,function(e){t.fields.push({id:e.id,name:e.attributes.name,type:e.attributes.content_type})})}),_.each(t.table.attributes.query.rules,function(e){_.each(t.fields,function(t){t.id==e.id&&(e.type=t.type,"integer"!=t.type&&"float"!=t.type||(e.value=+e.value))})})}).catch(function(e){console.log(e)}),t.validateType=function(e){e.value=null,_.each(t.fields,function(t){t.id==e.id&&(e.type=t.type)})},t.conditions=[{name:"AND"},{name:"OR"}],t.operators=[{name:"equal",value:"equal"},{name:"not equal",value:"not_equal"},{name:"in",value:"in"},{name:"less",value:"less"},{name:"less or equal",value:"less_or_equal"},{name:"greater",value:"greater"},{name:"greater or equal",value:"greater_or_equal"}],t.addCondition=function(e){t.table.attributes.query.rules.push({})},t.removeCondition=function(e){t.table.attributes.query.rules.splice(e,1)},u||(u=e(l)),i.append(u(t,function(e){return e}))}}}}])}();
!function(){angular.module("app").directive("instanceTables",["api",function(e){return{restrict:"E",scope:{instanceTables:"=",projectId:"=",pageSelecting:"=",operations:"="},templateUrl:"components/configuration/instance-tables.html",controller:["$scope",function(t){t.tables=[],t.listTableToDelete=[],t.nameInstables="",t.clickOneTable=null,e.project().tables({id:t.projectId}).$promise.then(function(e){t.tables=e.data}),t.addToListTableToDelete=function(e){t.clickOneTable=!0;var n=1;_.each(t.listTableToDelete,function(l,a){l.id===e.id&&(n=0,t.listTableToDelete[a]=null)}),t.listTableToDelete=_.compact(t.listTableToDelete),1==n&&t.listTableToDelete.push({id:e.id}),console.log(t.listTableToDelete)},t.deleteAllTable=function(){return t.clickOneTable&&t.listTableToDelete.length>0?(t.listTableToDelete=[],_.each(t.instanceTables,function(e){t.listTableToDelete.push({id:e.id})}),t.clickOneTable=!1,!1):!t.clickOneTable&&t.listTableToDelete.length>0?(t.listTableToDelete=[],!1):(t.clickOneTable||0!=t.listTableToDelete.length||_.each(t.instanceTables,function(e){t.listTableToDelete.push({id:e.id})}),void console.log(t.listTableToDelete))},t.saveInstanceTable=function(){if(t.tableId){var n=1;_.each(t.instanceTables,function(e){"use strict";e.attributes.name===t.nameInstables&&(swal("Error!","the table's name was existed","error"),n=0)}),1==n&&e.project().addInstanceTables({id:t.projectId,page_id:t.pageSelecting.id,table_id:t.tableId,name:t.nameInstables}).$promise.then(function(e){t.instanceTables.push(e.data),t.nameInstables="",t.tableId=null,swal("Success!","Successfully saved instance table","success")}).catch(function(e){swal("Error!",angular.toJson(e),"error")})}else swal("Error!","Please choose tables","error")},t.getInsTable=function(e,n){t.nameInstables=e.attributes.name,t.isUpdate=!0,t.instableSelected=e,t.indexInstanceTable=n},t.updateInstanceTable=function(){e.project().updateInstanceTable({id:t.projectId,page_id:t.pageSelecting.id,instanceTableId:t.instableSelected.id,name:t.nameInstables}).$promise.then(function(e){t.instanceTables[t.indexInstanceTable]=e.data,swal("Success!","Successfully deleted table","success")}).catch(function(e){}),t.instableSelected=null,t.isUpdate=!1,t.nameInstables=""},t.deleteSelectedInstanceTable=function(){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1,html:!1},function(){_.each(t.listTableToDelete,function(n){e.project().deleteInstanceTable({id:t.projectId,page_id:t.pageSelecting.id,instanceTableId:n.id}).$promise.then(function(){_.each(t.instanceTables,function(e,l){n.id==e.id&&(t.instanceTables.splice(l,1),_.each(t.operations,function(n,l){n.attributes.ds_name==e.attributes.name&&(t.deleteAliasPage(n),t.operations.splice(l,1))}))}),swal("Success!","Successfully deleted table","success")}).catch(function(e){})})})},t.deleteAliasPage=function(n){e.projectOperation().destroy({project_id:t.projectId,page_id:t.pageSelecting.id,id:n.id}).$promise.then(function(e){swal("Success!","Successfully delete instance table conditions","success")}).catch(function(e){console.log(e),swal("Error!","Error in deleted instance table conditions","error")})}}]}}])}();
!function(){angular.module("app").directive("labelCustom",function(){return{restrict:"E",templateUrl:"components/nodes-properties/label.html",controller:["$scope",function(e){e.deleteStyle=function(t){e.models.selected.properties.styles.splice(t,1)},e.createStyle=function(){var t={name:"",value:""};e.models.selected.properties.styles.push(t)}}]}})}();
!function(){angular.module("app").directive("listCustom",function(){return{restrict:"E",templateUrl:"components/nodes-properties/list.html",controller:["$scope",function(e){e.deleteStyle=function(t){e.models.selected.properties.styles.splice(t,1)},e.createStyle=function(){var t={name:"",value:""};e.models.selected.properties.styles.push(t)},e.addItemForList=function(){var t={text:"New ITem"};e.models.selected.items.push(t)},e.removeItemForList=function(t){e.models.selected.items.splice(t,1)}}]}})}();
!function(){angular.module("app").directive("localAlias",["api","$q","InstanceTable",function(e,a,t){return{restrict:"E",templateUrl:"components/configuration/local-alias.html",scope:{projectId:"=",pageSelecting:"="},controller:["$scope",function(t){t.local=angular.fromJson('{"name": "", "ds_name": "localVar", "stage": "init" , "operation_type": "processing", "query": null }'),t.localVars=[],t.$watch("localVars",function(e){t.localVars=e}),promiseAll=[],promiseAll.push(e.projectOperation().get({project_id:t.projectId,page_id:t.pageSelecting.id,stage:"init"}).$promise),a.all(promiseAll).then(function(e){var a=e[0].data;_.each(a,function(e){"processing"==e.attributes.operation_type&&(e.attributes.query=angular.fromJson(e.attributes.query),t.localVars.push(e))})}),t.addToListVarToDelete=function(e){t.clickOneTable=!0;var a=1;_.each(t.listVarToDelete,function(l,o){l.id===e.id&&(a=0,t.listVarToDelete[o]=null)}),t.listVarToDelete=_.compact(t.listVarToDelete),1==a&&t.listVarToDelete.push({id:e.id})},t.deleteAllVar=function(){return t.clickOneTable&&t.listVarToDelete.length>0?(t.listVarToDelete=[],_.each(t.localVars,function(e){t.listVarToDelete.push({id:e.id})}),t.clickOneTable=!1,!1):!t.clickOneTable&&t.listVarToDelete.length>0?(t.listVarToDelete=[],!1):void(t.clickOneTable||0!=t.listVarToDelete.length||_.each(t.localVars,function(e){t.listVarToDelete.push({id:e.id})}))},t.saveLocalVar=function(){e.projectOperation().save({project_id:t.projectId,page_id:t.pageSelecting.id,operation:{name:t.local.name,ds_name:"localVar",stage:"init",operation_type:"processing",query:angular.toJson(t.local.query)}}).$promise.then(function(e){e.data.attributes.query=angular.fromJson(e.data.attributes.query),t.localVars.push(e.data),swal("Success!","Successfully save local variable","success"),t.varSelected=null,t.isUpdate=!1,t.local.name="",t.local.query.type="",t.local.query.data=""}).catch(function(e){swal("Error",angular.toJson(e),"error")})},t.getVar=function(e,a){t.local.name=e.attributes.name,t.local.query.type=e.attributes.query.type,t.local.query.data=e.attributes.query.data,t.isUpdate=!0,t.varSelected=e,t.indexVar=a},t.updateLocalVar=function(){e.projectOperation().update({project_id:t.projectId,page_id:t.pageSelecting.id,id:t.varSelected.id,operation:{name:t.local.name,ds_name:"localVar",stage:"init",operation_type:"processing",query:angular.toJson(t.local.query)}}).$promise.then(function(e){e.data.attributes.query=angular.fromJson(e.data.attributes.query),t.localVars[t.indexVar]=e.data,swal("Success!","Successfully deleted table","success"),t.varSelected=null,t.isUpdate=!1,t.local.name="",t.local.query.type="",t.local.query.data=""}).catch(function(e){})},t.deleteLocalVar=function(){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1,html:!1},function(){_.each(t.listVarToDelete,function(a){e.projectOperation().destroy({project_id:t.projectId,page_id:t.pageSelecting.id,id:a.id}).$promise.then(function(e){_.each(t.localVars,function(e,l){e.id==a.id&&t.localVars.splice(l,1)}),swal("Success!","Successfully delete instance table conditions","success")}).catch(function(e){console.log(e),swal("Error!","Error in deleted instance table conditions","error")})})})}}]}}])}();
!function(){angular.module("app").directive("loginFlow",["api","InstanceTable",function(e,o){return{restrict:"E",scope:{pageSelecting:"=",modelSelected:"=",pages:"=",fields:"="},templateUrl:"components/login-logout-flow/login-flow.html",controller:["$scope",function(e){e.conditionFollow=angular.fromJson('{"query": {"condition": "and","rules":[]}}'),console.log(e.pages),e.isToNextTodoTrue=!1,e.fields=[],e.reFormatAction=function(o){e.modelSelected.action={type:o,data:{},todoTrue:{type:"alert",data:{}},todoFalse:{type:"alert",data:{}}}},e.reFormatTodoTrue=function(o){e.modelSelected.action.todoTrue={type:o,data:{}}},e.initDataForPostData=function(){e.modelSelected.action.todoTrue.afterPostData={type:"link",data:""},e.modelSelected.action.todoTrue.data={rows:[{table_id:e.modelSelected.action.data.idTableToCheck}]}}}]}}])}();
!function(){angular.module("app").directive("logoutFlow",["api","InstanceTable",function(e,o){return{restrict:"E",scope:{pageSelecting:"=",modelSelected:"=",pages:"=",fields:"="},templateUrl:"components/login-logout-flow/logout-flow.html",controller:["$scope",function(e){e.conditionFollow=angular.fromJson('{"query": {"condition": "and","rules":[]}}'),console.log(e.pages),e.isToNextTodoTrue=!1,e.fields=[],e.reFormatAction=function(o){e.modelSelected.action={type:o,data:{},todoTrue:{type:"alert",data:{}},todoFalse:{type:"alert",data:{}}}},e.reFormatTodoTrue=function(o){e.modelSelected.action.todoTrue={type:o,data:{}}},e.initDataForPostData=function(){e.modelSelected.action.todoTrue.afterPostData={type:"link",data:""},e.modelSelected.action.todoTrue.data={rows:[{table_id:e.modelSelected.action.data.idTableToCheck}]}}}]}}])}();
!function(){angular.module("app").directive("paragraph",function(){return{restrict:"E",templateUrl:"components/nodes-properties/paragraph.html",controller:["$scope",function(e){e.deleteStyle=function(t){e.models.selected.properties.styles.splice(t,1)},e.createStyle=function(){var t={name:"",value:""};e.models.selected.properties.styles.push(t)}}]}})}();
!function(){angular.module("app").directive("queryBuilder",["$compile",function(e){return{restrict:"E",scope:{query:"=",fields:"="},templateUrl:"components/configuration/query-builder.html",compile:function(n){var a,u;return a=n.contents().remove(),function(n,r){n.conditions=[{name:"AND"},{name:"OR"}],n.date="",n.operators=[{name:"equal",value:"equal"},{name:"not equal",value:"not_equal"},{name:"in",value:"in"},{name:"less",value:"less"},{name:"less or equal",value:"less_or_equal"},{name:"greater",value:"greater"},{name:"greater or equal",value:"greater_or_equal"}],n.addCondition=function(){n.query.rules.push({})},n.removeCondition=function(e){n.query.rules.splice(e,1)},n.validateType=function(e){_.each(n.fields,function(n){n.id==e.id&&(e.type=n.type)})},u||(u=e(a)),r.append(u(n,function(e){return e}))}}}}])}();
!function(){angular.module("app").directive("radio",function(){return{restrict:"E",templateUrl:"components/nodes-properties/radio.html",controller:["$scope",function(e){e.deleteStyle=function(t){e.models.selected.properties.styles.splice(t,1)},e.createStyle=function(){var t={name:"",value:""};e.models.selected.properties.styles.push(t)}}]}})}();
!function(){angular.module("app").directive("resizer",["$document",function(e){return function(t,i,r){function o(e){if("vertical"==r.resizer){$resizeLeft=angular.element(r.resizerLeft),$resizeRight=angular.element(r.resizerRight);var t=$resizeLeft.width(),i=e.pageX-$resizeLeft.offset().left-u,o=Math.floor(t-i);if(i<=0||$resizeRight.width()<u&&o<0)return;$resizeLeft.width(i),$resizeRight.width($resizeRight.width()+o)}else{$resizeTop=angular.element(r.resizerTop),$resizeBottom=angular.element(r.resizerBottom);var n=$resizeTop.height(),s=e.pageY-$resizeTop.offset().top-u,o=Math.floor(n-s);if(s<=0||$resizeBottom.height()<u&&o<0)return;$resizeTop.height(s),$resizeBottom.height($resizeBottom.height()+o)}}function n(){e.unbind("mousemove",o),e.unbind("mouseup",n)}var s=r.resizerWidth||r.resizerHeight,u=s/2;i.on("mousedown",function(t){t.preventDefault(),t.stopPropagation(),e.on("mousemove",o),e.on("mouseup",n)})}}])}();
!function(){angular.module("app").directive("dndRightSelected",["$document","$parse",function(n,e){return function(n,t,i){t.on("contextmenu",function(t){i.dndRightSelected&&(t=t.originalEvent||t,n.$apply(function(){e(i.dndRightSelected)(n,{event:t})}),t.stopPropagation())})}}])}();
!function(){angular.module("app").directive("selectCustom",function(){return{restrict:"E",templateUrl:"components/nodes-properties/select.html",controller:["$scope",function(e){e.deleteStyle=function(t){e.models.selected.properties.styles.splice(t,1)},e.createStyle=function(){var t={name:"",value:""};e.models.selected.properties.styles.push(t)},e.addMoreOptions=function(){var t={value:"new options"};e.models.selected.options.push(t)},e.removeOptionsSelect=function(t){e.models.selected.options.splice(t,1)}}]}})}();
!function(){angular.module("app").directive("stacked",function(){return{restrict:"E",templateUrl:"components/nodes-properties/stacked.html",controller:["$scope",function(e){e.deleteStyle=function(t){e.models.selected.properties.styles.splice(t,1)},e.createStyle=function(){var t={name:"",value:""};e.models.selected.properties.styles.push(t)},e.$watch("models.selected.bgImageSrc",function(e){console.log(e)})}]}})}();
!function(){angular.module("app").directive("switchIsDatabase",function(){return{restrict:"E",scope:{modelSelected:"=",isDatabase:"="},templateUrl:"components/nodes-properties/switchIsDatabase.html",controller:["$scope",function(t){t.resetDataInput=function(t){t.data={table:"default",column:"default"},t.content="Paragraph Text",t.label="Text","list"==t.type&&(t.items=[{text:"Item 1"},{text:"Item 2"},{text:"Item 3"}]),"list"==t.select&&(t.options=[{value:"Options 1"},{value:"Options 2"}])}}]}})}();
!function(){angular.module("app").directive("tableCustom",function(){return{restrict:"E",templateUrl:"components/nodes-properties/table.html",controller:["$scope",function(e){e.deleteStyle=function(o){e.models.selected.properties.styles.splice(o,1)},e.createStyle=function(){var o={name:"",value:""};e.models.selected.properties.styles.push(o)},e.checkFocus=function(e,o){_.each(e,function(e){e.onFocus=!1}),o.onFocus=!0},e.addColumnForTable=function(){var o={name:"New Column"};e.models.selected.columns.push(o),_.each(e.models.selected.rows,function(e){var o={value:"New Value Column"};e.data.push(o)})},e.removeColumnForTable=function(o){e.models.selected.columns.splice(o,1),_.each(e.models.selected.rows,function(e,o){e.data.splice(o,1)})};var o;e.addRowForTable=function(){o={data:[]},_.each(e.models.selected.columns,function(e,l){var n={value:"New Data Column "+(l+1)};o.data.push(n)}),e.models.selected.rows.push(o)},e.removeRowForTable=function(o){e.models.selected.rows.splice(o,1)},e.addColumnForDBTable=function(){var o={name:"New Column",onFocus:!1,operation:null};e.models.selected.dbColumns.push(o)},e.removeColumnForDBTable=function(o){e.models.selected.dbColumns.splice(o,1)}}]}})}();
!function(){angular.module("app").directive("textareaCustom",function(){return{restrict:"E",templateUrl:"components/nodes-properties/textarea.html",controller:["$scope",function(e){e.deleteStyle=function(t){e.models.selected.properties.styles.splice(t,1)},e.createStyle=function(){var t={name:"",value:""};e.models.selected.properties.styles.push(t)}}]}})}();
"use strict";!function(){angular.module("app").directive("ngThumb",["$window",function(e){var t={support:!(!e.FileReader||!e.CanvasRenderingContext2D),isFile:function(t){return angular.isObject(t)&&t instanceof e.File},isImage:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(t)!==-1}};return{restrict:"A",template:"<canvas/>",link:function(e,i,n){function a(e){var t=new Image;t.onload=r,t.src=e.target.result}function r(){var e=s.width||this.width/this.height*s.height,t=s.height||this.height/this.width*s.width;h.attr({width:e,height:t}),h[0].getContext("2d").drawImage(this,0,0,e,t)}if(t.support){var s=e.$eval(n.ngThumb);if(t.isFile(s.file)&&t.isImage(s.file)){var h=i.find("canvas"),g=new FileReader;g.onload=a,g.readAsDataURL(s.file)}}}}}])}();
!function(){angular.module("app").directive("todoFalse",["$compile",function(e){return{restrict:"E",scope:{modelSelected:"=",pages:"=",pageSelecting:"="},templateUrl:"components/todo-false/todo-false.html",compile:function(t){var o,n;return o=t.contents().remove(),function(t,a){t.reFormatTodoFalse=function(e){t.modelSelected.action.todoTrue.afterPostData={type:e,data:{}}},n||(n=e(o)),a.append(n(t,function(e){return e}))}}}}])}();
!function(){angular.module("app").directive("todoTrue",["$compile",function(e){return{restrict:"E",scope:{query:"=",fields:"=",modelSelected:"=",pages:"=",pageSelecting:"="},templateUrl:"components/todo-true/todo-true.html",compile:function(t){var o,a;return o=t.contents().remove(),function(t,n){t.setDataForTodo=function(e){t.modelSelected.action.todoTrue.data.rows[0].hasOwnProperty(e.name)?delete t.modelSelected.action.todoTrue.data.rows[0][e.name]:t.modelSelected.action.todoTrue.data.rows[0][e.name]={column_id:e.id,value:""}},t.reFormatAfterPostData=function(e){t.modelSelected.action.todoTrue.afterPostData={type:e,data:{}}},a||(a=e(o)),n.append(a(t,function(e){return e}))}}}}])}();
!function(){angular.module("app").factory("api",["$resource","CONSTANT",function(e,a){return{auth:function(){return e(a.API+"/admin/auth/sign_in",{},{sign_out:{method:"DELETE",url:a.API+"/admin/auth/sign_out"}})},projectPage:function(){return e(a.API+"/api/v1/admin/projects/:projectId/pages/:pageId",{projectId:"@projectId",pageId:"@pageId"},{destroy:{method:"DELETE"},update:{method:"PUT"}})},projectOperation:function(){return e(a.API+"/api/v1/admin/projects/:project_id/pages/:page_id/operations/:id",{project_id:"@project_id",page_id:"@page_id",id:"@id"},{destroy:{method:"DELETE"},update:{method:"PUT"}})},project:function(){return e(a.API+"/api/v1/admin/projects/:id",{id:"@id"},{destroy:{method:"DELETE"},update:{method:"PUT"},tables:{method:"GET",url:a.API+"/api/v1/admin/projects/:id/tables"},addTables:{method:"POST",url:a.API+"/api/v1/admin/projects/:id/tables"},getTable:{params:{tableID:"@tableID"},method:"GET",url:a.API+"/api/v1/admin/projects/:id/tables/:tableID"},updateTable:{params:{tableID:"@tableID"},method:"PUT",url:a.API+"/api/v1/admin/projects/:id/tables/:tableID"},deleteTable:{params:{tableID:"@tableID"},method:"DELETE",url:a.API+"/api/v1/admin/projects/:id/tables/:tableID"},loadColumnTable:{params:{tableID:"@tableID"},method:"GET",url:a.API+"/api/v1/admin/projects/:id/tables/:tableID/columns"},loadLocalVars:{params:{page_id:"@page_id"},method:"GET",url:a.API+"/api/v1/admin/projects/:id/pages/:page_id/local_variables"},addInstanceTables:{params:{page_id:"@page_id"},method:"POST",url:a.API+"/api/v1/admin/projects/:id/pages/:page_id/table_instances"},loadInstanceTables:{params:{page_id:"@page_id"},method:"GET",url:a.API+"/api/v1/admin/projects/:id/pages/:page_id/table_instances"},updateInstanceTable:{params:{page_id:"@page_id",instanceTableId:"@instanceTableId"},method:"PUT",url:a.API+"/api/v1/admin/projects/:id/pages/:page_id/table_instances/:instanceTableId"},deleteInstanceTable:{params:{page_id:"@page_id",instanceTableId:"@instanceTableId"},method:"DELETE",url:a.API+"/api/v1/admin/projects/:id/pages/:page_id/table_instances/:instanceTableId"},loadColumnInstanceTables:{params:{page_id:"@page_id",instanceTableId:"@instanceTableId"},method:"GET",url:a.API+"/api/v1/admin/projects/:id/pages/:page_id/table_instances/:instanceTableId"},columns:{params:{tableID:"@tableID"},method:"GET",url:a.API+"/api/v1/admin/projects/:id/tables/:tableID/columns"},getColumn:{params:{tableID:"@tableID",columnID:"@columnID"},method:"GET",url:a.API+"/api/v1/admin/projects/:id/tables/:tableID/columns/:columnID"},addColumn:{params:{tableID:"@tableID"},method:"POST",url:a.API+"/api/v1/admin/projects/:id/tables/:tableID/columns"},deleteColumn:{params:{tableID:"@tableID",columnID:"@columnID"},method:"DELETE",url:a.API+"/api/v1/admin/projects/:id/tables/:tableID/columns/:columnID"},updateColumn:{params:{tableID:"@tableID",columnID:"@columnID"},method:"PUT",url:a.API+"/api/v1/admin/projects/:id/tables/:tableID/columns/:columnID"},pictures:{method:"GET",url:a.API+"/api/v1/admin/projects/:id/pictures"},destroyPictures:{params:{pictureId:"@pictureId"},method:"DELETE",url:a.API+"/api/v1/admin/projects/:id/pictures/:pictureId"},createRole:{method:"POST",url:a.API+"/api/v1/admin/projects/:id/role_types/creates"},projectRoles:{method:"GET",url:a.API+"/api/v1/admin/projects/:id/roles"},projectRoleTypes:{method:"GET",url:a.API+"/api/v1/admin/projects/:id/role_types"},userRole:{method:"GET",url:a.API+"/api/v1/admin/projects/:id/users"},addUserRole:{method:"POST",url:a.API+"/api/v1/admin/projects/:id/roles/create_multiple"},deleteUserRole:{params:{roleId:"@roleId"},method:"DELETE",url:a.API+"/api/v1/admin/projects/:id/roles/:roleId"},deleteRole:{params:{roleId:"@roleId"},method:"DELETE",url:a.API+"/api/v1/admin/projects/:id/role_types/:roleId"},userInRoleType:{params:{roleId:"@roleId"},method:"GET",url:a.API+"/api/v1/admin/projects/:id/role_types/:roleId/users"}})},client:function(){return e(a.API+"/api/v1/admin/clients/:id",{id:"@id"},{destroy:{method:"DELETE"},update:{method:"PUT"}})},user:function(){return e(a.API+"/api/v1/admin/users/:id",{id:"@id"},{destroy:{method:"DELETE"},update:{method:"PUT"}})}}}])}();
!function(){angular.module("app").factory("Auth",["dataStorage",function(e){return{clearUser:function(){e.removeUser(),e.removeToken()},setUser:function(t){e.setUser(t),e.setToken(t.token)},isLoggedIn:function(){return e.getUser()},setSentMailResetPassword:function(){e.setReset()},clearSentMailResetPassword:function(){e.removeReset()},isSentMailResetPassword:function(){return e.getReset()}}}])}();
!function(){angular.module("app").factory("Dialog",["$q","$translate","$uibModal",function(t,n,o){var e={TYPE:{WARNING:"warning",ERROR:"error",SUCCESS:"success",INFO:"info",INPUT:"input"},ANIMATION:{DEFAULT:!1,FROM_TOP:"slide-from-top",FROM_BOTTOM:"slide-from-bottom"}},r=function(o){var e=t.defer();return n([o.title,o.text,o.confirmButtonText,o.cancelButtonText,o.inputPlaceholder,o.inputValue]).then(function(t){o.title=t[o.title],o.text=t[o.text],o.confirmButtonText=t[o.confirmButtonText],o.cancelButtonText=t[o.cancelButtonText],o.inputPlaceholder=t[o.inputPlaceholder],o.inputValue=t[o.inputValue],swal(o,e.resolve)}).catch(e.reject),e.promise};return e.showInputError=function(t){n([t]).then(function(n){swal.showInputError(n[t])}).catch(function(t){console.log(t)})},e.confirm=function(t){return t.showLoaderOnConfirm=!0,t.showCancelButton=!0,t.closeOnConfirm=!1,r(t)},e.alert=function(t){return r(t)},e}])}();
!function(){angular.module("app").factory("InstanceTable",["api","$q",function(e,t){var a={projectId:"",data_instanceTables:[],data_operations:[],data_operations_get:[],data_column:[],data_tables:[],fields:[]};return a.init=function(e){a.projectId=e,a.fields=[]},a.loadDataInstanceTable=function(n){var o=t.defer();return e.project().loadInstanceTables({id:a.projectId,page_id:n}).$promise.then(function(e){a.data_instanceTables=e.data,o.resolve()}).catch(o.reject),o.promise},a.loadDataOperations=function(n){var o=t.defer();return e.projectOperation().get({project_id:a.projectId,page_id:n,stage:"init"}).$promise.then(function(e){a.data_operations=e.data,o.resolve()}).catch(o.reject),o.promise},a.loadDataOperationsGet=function(n){var o=t.defer();return e.projectOperation().get({project_id:a.projectId,page_id:n,stage:"init"}).$promise.then(function(e){_.each(e.data,function(t,a){"processing"===t.attributes.operation_type&&(e.data[a]=null,e.data=_.compact(e.data))}),a.data_operations_get=e.data,o.resolve()}).catch(o.reject),o.promise},a.loadColumnInstanceTable=function(n,o){var r=t.defer();return e.project().loadColumnInstanceTables({id:a.projectId,page_id:n,instanceTableId:o.id}).$promise.then(function(e){a.data_column=e.included,r.resolve()}).catch(r.reject),r.promise},a.loadColumnTable=function(n,o){var r=t.defer();return e.project().loadColumnTable({id:a.projectId,page_id:n,tableID:o.id}).$promise.then(function(e){a.data_column=e.data,r.resolve(e.data)}).catch(r.reject),r.promise},a.loadTables=function(){var n=t.defer();return e.project().tables({id:a.projectId}).$promise.then(function(e){a.data_tables=e.data,n.resolve()}).catch(n.reject),n.promise},a}])}();
!function(){angular.module("app").factory("Picture",["api","$q",function(t,r){var e={pictures:[],projectId:""};return e.loadPictures=function(c){e.projectId=c;var u=r.defer();return t.project().pictures({id:c}).$promise.then(function(t){e.pictures=t.data,u.resolve(t.data)}).catch(u.reject),u.promise},e.getData=function(){return e.pictures},e}])}();
!function(){angular.module("app").factory("Router",["$state","$timeout",function(n,o){var t={};return t.changeView=function(t,a,e){o(function(){n.go(t,a,e)},0)},t.toLogin=function(n,o){t.changeView("app.login",n,o)},t.toDashboard=function(n,o){t.changeView("app.admin.dashboard",n,o)},t.toUsers=function(n,o){t.changeView("app.admin.users",n,o)},t.toClients=function(n,o){t.changeView("app.admin.clients",n,o)},t.toProjects=function(n,o){t.changeView("app.admin.projects",n,o)},t.toProjectDetail=function(n,o){t.changeView("app.admin.projects.show",n,o)},t}])}();
!function(){angular.module("app").factory("dataStorage",["localStorageService",function(e){var n={},t=function(n,t){e.set(n,angular.toJson(t))},o=function(n){return angular.fromJson(e.get(n))},r=function(n){e.remove(n)};return n.setToken=function(e){t("token",e)},n.getToken=function(){return o("token")},n.removeToken=function(){r("token")},n.setUser=function(e){t("user",e)},n.getUser=function(){return o("user")},n.removeUser=function(){r("user")},n.setReset=function(){t("reset",!0)},n.getReset=function(){return o("reset")},n.removeReset=function(){r("reset")},n}])}();
!function(){angular.module("app").factory("Upload",["dataStorage","FileUploader",function(a,e){return{init:function(t,n){var o=n?"PUT":"POST",i=a.getToken();return new e({alias:"image_data",url:t,method:o,autoUpload:!1,headers:{"access-token":i["access-token"],client:i.client,uid:i.uid}})}}}])}();
!function(){angular.module("app").factory("util",function(){return{getUrlVars:function(n){for(var t,r=decodeURI(n),e=[],u=r.slice(r.indexOf("?")+1).split("&"),i=0;i<u.length;i++)t=u[i].split("="),e.push(t[0]),e[t[0]]=t[1];return e}}})}();
!function(){angular.module("app").controller("Header",["$scope","api","Auth","Router",function(o,n,r,t){o.currentUser=r.isLoggedIn(),o.logout=function(){n.auth().sign_out().$promise.then(function(o){r.clearUser(),t.toLogin()}).catch(function(o){swal("Error!",angular.toJson(o),"error")})}}])}();
!function(){angular.module("app").controller("ListProjects",["$scope","api","util","$http","CONSTANT",function(t,e,o,n,r){t.total=0,t.maxSize=10,t.currentPage=1,t.projects=[],e.project().get().$promise.then(function(e){t.total=parseInt(o.getUrlVars(e.links.last)["page[number]"])*parseInt(o.getUrlVars(e.links.last)["page[size]"]),t.projects=e.data}),t.loadProject=function(e){t.projects=[],n.get(r.API+"/api/v1/admin/projects?page[number]="+e+"&page[size]=10").then(function(e){t.projects=e.data.data})},t.deleteItem=function(o,n){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1,html:!1},function(){e.project().destroy({id:o.id}).$promise.then(function(e){swal("Successful!","the project was deleted from system","success"),console.log(e),t.projects.splice(n,1)}).catch(function(t){swal("Error!",angular.toJson(t),"error")})})},t.loadUrl=function(t){return r.HTML5?r.CLIENT_SITE+"/"+t:r.CLIENT_SITE+"/!#/"+t}}])}();
!function(){angular.module("app").controller("Sidebar",["$scope","api",function(t,i){t.links=[{title:"Projects",icon:"product-hunt",sublinks:[]},{title:"Master",icon:"sitemap",sublinks:[{title:"Clients",link:"app.admin.clients"},{title:"Sites",link:"app.admin.sites"},{title:"Branches",link:"app.admin.branches"},{title:"Protocols",link:"app.admin.projects"},{title:"Users",link:"app.admin.users"},{title:"Items",link:"app.admin.items"},{title:"Payment",link:"app.admin.payments"}]},{title:"Links",icon:"external-link",sublinks:[{title:"Github",link:"http://github.com",icon:"github",external:!0,target:"_blank"},{title:"Yahoo",link:"http://yahoo.com",icon:"yahoo",external:!0,target:"_blank"}]}],i.project().get().$promise.then(function(i){var n=i.data;_.each(n,function(i,n){n<3&&t.links[0].sublinks.push({title:i.attributes.name,link:"app.admin.projects.show({id: "+i.id+"})"})}),t.links[0].sublinks.push({title:"...more",link:"app.admin.projects"})})}])}();
!function(){angular.module("app").config(["$translateProvider",function(e){e.translations("en",{titles:{data:"data",pages:"pages",components:"components",cssStyle:"CSS Style",flexStyle:"Flex Style",style:"Style",value:"Value",content:"Content",placeHolder:"Place Holder",listType:"List Type (default :ul)",label:"Label",column:"Column",row:"Row",groupName:"Group Name",getFromDB:"Use database",chooseImage:"Choose Image",chooseBgImage:"Choose Background Image",inputType:"Input Type",inputMethod:"Input Method"},flex:{title:{direction:"Direction",wrap:" Wrap",justifyContent:"Justify Content",alignItem:"Align Item",alignContent:"Align Content",alignSelf:"Align Self"},auto:"auto",baseline:"baseline",stretch:"stretch",row:"row",column:"column",columnReverse:"column reverse",rowReverse:"row reverse",wrap:"wrap",nowrap:"no wrap",wrapReverse:"wrap reverse",start:"start",end:"end",center:"center",spaceBetween:"space between",spaceAround:"space around"},inputMethod:{get:"get",post:"post"},inputType:{email:"email",text:"text",number:"number",password:"password",tel:"tel"},table:{id:"ID",name:"name",type:"type",action:"action",columnName:"column name",columnType:"column type",condition:"condition",require:"require",addNew:"add new table",insTableName:"Instance Table Name"},configuration:{title:{table:"Tables",dataAlias:"Database Variable",operationName:"Operation Name",stage:"Stage",operationType:"Operation Type",condition:"Condition"}},localVar:{title:{localVar:"Local Variable",localVarName:"Local Variable Name",localVarType:"Local Variable Type",localVarValue:"Local Variable Value"},type:{string:"string",number:"number",object:"object",array:"array"}},insTable:{title:{chooseTable:"Choose Table",setInsTableName:"Set instance table name",init:"init",active:"active",get:"get",processing:"processing"}},buttons:{save:"save",signIn:"sign in",create:"create",createNew:"create new",update:"update",delete:"delete",more:"more",add:"add",addNew:"add new",back:"back",copy:"copy",clear:"clear"},error:{pattern:"pattern incorrect",email:"Please input a valid email.",password:"your password must be at least 8 characters.",mismatch:"your confirm password is not match with password.",require:"Please input this field"}})}])}();
!function(){angular.module("app").controller("Clients",["$scope","api","util","$http","CONSTANT",function(t,e,n,o,l){t.total,t.maxSize=10,t.currentPage=1,e.client().get().$promise.then(function(e){t.total=parseInt(n.getUrlVars(e.links.last)["page[number]"])*parseInt(n.getUrlVars(e.links.last)["page[size]"]),t.clients=e.data,console.log(e)}).catch(function(t){console.log(t),swal("Error!","Please try it again","error")}),t.loadClient=function(e){t.clients=[],o.get(l.API+"/api/v1/admin/clients?page[number]="+e+"&page[size]=10").then(function(e){t.clients=e.data.data})},t.deleteItem=function(n,o){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1,html:!1},function(){e.client().destroy({id:n.id}).$promise.then(function(e){swal("Successful!","the client was deleted from system","success"),console.log(e),t.clients.splice(o,1)}).catch(function(t){swal("Error!",angular.toJson(t),"error"),console.log(t)})})}}])}();
!function(){angular.module("app").controller("Dashboard",["$scope","api","Auth","Router",function(o,a,n,u){}])}();
!function(){angular.module("app").controller("Login",["$scope","api","Auth","Router",function(o,r,n,a){o.user={email:"",password:""},o.auth=function(t){r.auth().save(o.user,function(o,r){var t=r(),u=o;u.token=t,n.setUser(u),a.toDashboard()},function(o){swal("Error!",angular.toJson(o),"error")})}}])}();
!function(){angular.module("app").controller("Users",["$scope","api","util","$http","CONSTANT",function(e,t,s,a,r){e.total,e.maxSize=10,e.currentPage=1,e.users=[];var n=function(){t.user().get().$promise.then(function(t){e.total=parseInt(s.getUrlVars(t.links.last)["page[number]"])*parseInt(s.getUrlVars(t.links.last)["page[size]"]),e.users=t.data})};n(),e.loadUser=function(t){e.users=[],a.get(r.API+"/api/v1/admin/users?page[number]="+t+"&page[size]=10").then(function(t){e.users=t.data.data})},e.deleteItem=function(s,a){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1,html:!1},function(){t.user().destroy({id:s.id}).$promise.then(function(t){swal("Successful!","the user was deleted from system","success"),console.log(t),e.users.splice(a,1)}).catch(function(e){swal("Error!",angular.toJson(e),"error"),console.log(e)})})},e.searchUser=function(){a.get(r.API+"/api/v1/admin/users/search?q="+e.searchCriteriaUser).then(function(t){e.total=parseInt(s.getUrlVars(t.data.links.last)["page[number]"])*parseInt(s.getUrlVars(t.data.links.last)["page[size]"]),e.users=t.data.data})},e.$watch("searchCriteriaUser",function(e){""===e&&n()})}])}();
!function(){angular.module("app").controller("Projects",["$scope","api","Auth","Router",function(o,n,t,u){}])}();
!function(){angular.module("app").controller("AddClients",["$scope","api","Router",function(n,e,o){n.client={name:""},n.formAction=function(c){e.client().save(n.client).$promise.then(function(n){swal("Successful!","the client was created","success"),console.log(n),o.toClients()}).catch(function(n){swal("Error!",angular.toJson(n),"error")})}}])}();
!function(){angular.module("app").controller("EditClients",["$scope","api","$stateParams","Router",function(t,n,e,o){var a=e.id;n.client().get({id:a}).$promise.then(function(n){var e=n.data;t.client={name:e.attributes.name}}),t.formAction=function(e){n.client().update({id:a},t.client).$promise.then(function(t){swal("Successful!","the client was updated","success"),console.log(t),o.toClients()}).catch(function(t){swal("Error!",angular.toJson(t),"error")})}}])}();
!function(){angular.module("app").controller("AddUsers",["$scope","api","Router",function(o,s,e){o.user={name:"",email:"",password:"",confirm_password:""},o.formAction=function(r){s.user().save(o.user).$promise.then(function(o){swal("Successful!","the client was created","success"),console.log(o),e.toUsers()}).catch(function(o){swal("Error!",angular.toJson(o),"error")})}}])}();
!function(){angular.module("app").controller("EditUsers",["$scope","api","$stateParams","Router",function(e,r,s,t){var o=s.id;r.user().get({id:o}).$promise.then(function(r){var s=r.data;e.user=s.attributes}),e.formAction=function(s){r.user().update({id:o},e.user).$promise.then(function(e){swal("Successful!","the user was updated","success"),console.log(e),t.toUsers()}).catch(function(e){swal("Error!",angular.toJson(e),"error")})}}])}();
!function(){angular.module("app").controller("ShowUsers",["$scope","api","$stateParams",function(a,e,n){var o=n.id;e.user().get({id:o}).$promise.then(function(e){a.user=e.data})}])}();
!function(){angular.module("app").controller("AddProjects",["$scope","api","Auth","Router",function(o,e,n,t){o.format="yyyy-MM-dd",o.project={},o.popup1={opened:!1},o.popup2={opened:!1},o.open1=function(){o.popup1.opened=!0},o.open2=function(){o.popup2.opened=!0},e.client().get().$promise.then(function(e){o.clients=e.data}),o.clear=function(){o.project={}},o.copy=function(){alert("coming soon")},o.formAction=function(n){e.project().save({project:o.project}).$promise.then(function(o){console.log(o),swal("Successful!","the project was created","success"),t.toProjects()}).catch(function(o){swal("Error!",angular.toJson(o),"error")})}}])}();
!function(){angular.module("app").controller("DesignProjects",["$scope","api","Auth","Router","$stateParams","$q","InstanceTable","CONSTANT","Picture",function(e,t,n,a,s,i,c,l,o){e.isDesign=!0,e.typeValue="DB_Data",e.pictures=[],e.projectID=s.projectId,c.init(e.projectID);var r=s.projectId,u={list:[],index:"",value:null,listSelectItems:[],saveDB:[]};e.nameInstables={name:""},e.models={pageName:{name:""},selected:null,templates:[__clisss.Stacked,__clisss.Paragraph,__clisss.Label,__clisss.Heading,__clisss.Textarea,__clisss.Input,__clisss.List,__clisss.Select,__clisss.Table,__clisss.Button,__clisss.Checkbox,__clisss.Radio,__clisss.Image,__clisss.Form],dropzones:{children:[]}},e.stackedClass=["direction-row","direction-row-reverse","direction-column","direction-column-reverse","nowrap","wrap","wrap-reverse","justify-content-start","justify-content-center","justify-content-space-between","justify-content-space-around","align-items-start","align-items-end","align-items-center","align-items-baseline","align-items-stretch","align-content-start","align-content-end","align-content-center","align-content-space-between","align-content-space-around","flex align-content-stretch"],e.icons=["lock","rocket","users","user"],e.pageSelecting={},e.pages=[],e.roles=[],e.pageName="",t.projectPage().get({projectId:r}).$promise.then(function(n){return e.pages=n.data,e.pageSelecting=e.pages[0],c.loadDataInstanceTable(e.pageSelecting.id).then(function(){e.instanceTables=c.data_instanceTables}),c.loadTables(e.pageSelecting.id).then(function(){e.tables=c.data_tables}),c.loadDataOperations(e.pageSelecting.id).then(function(){e.operations=c.data_operations}),c.loadDataOperationsGet(e.pageSelecting.id).then(function(){e.operations_get=c.data_operations_get}),e.models.dropzones=angular.fromJson(e.pageSelecting.attributes.layout),t.project().projectRoleTypes({id:r}).$promise}).then(function(t){e.roles=t.data}).catch(function(e){swal("Error!",angular.toJson(e),"error")}),e.addNewPage=function(){is.empty(e.pageName)||t.projectPage().save({projectId:r,page:{name:e.pageName,sluck:e.pageName,layout:angular.toJson({children:[]})}}).$promise.then(function(t){e.pages.push(t.data),e.pageName=""}).catch(function(e){swal("Error!",angular.toJson(e),"error")})},e.deletePage=function(n,a){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1,html:!1},function(){t.projectPage().destroy({projectId:r,pageId:n.id}).$promise.then(function(t){console.log(t),e.pages.splice(a,1),swal("Successful!","page was deleted from project","success")}).catch(function(e){swal("Error!",angular.toJson(e),"error")})})},e.joinClass=function(e,t){var n={};return _.each(e,function(e,a){e.name&&e.value&&(n[e.name]=e.value),"selected"===e.name&&(n[e.name]=t)}),n},e.checkColor=function(e){return/\bcolor\b|\bbackground\b/.test(e)},e.checkBackgroundImage=function(e,t){var n=e.name.indexOf("image")>=0;return n?(is.empty(e.value)||is.string(e.value))&&(e.value={attributes:{image:{url:""}}}):is.object(e.name)&&(e.value=""),n},e.joinStyles=function(t){var n={};return _.each(t,function(t,a){if(t.name){var s="";s=t.name.indexOf("image")>=0&&is.object(t.value)?'url("'+e.loadUrl(t.value.attributes.image.url)+'")':t.value,n[t.name]=s}}),n},e.selectPage=function(t,n){e.pageSelecting=n,e.columnTableQueried=void 0,c.loadDataInstanceTable(e.pageSelecting.id).then(function(){e.instanceTables=c.data_instanceTables}),c.loadDataOperations(e.pageSelecting.id).then(function(){e.operations=c.data_operations}),c.loadDataOperationsGet(e.pageSelecting.id).then(function(){e.operations_get=c.data_operations_get}),e.models.dropzones=angular.fromJson(e.pageSelecting.attributes.layout)},e.$watch("models.dropzones",function(t){is.empty(e.pageSelecting)||(e.pageSelecting.attributes.layout=angular.toJson({children:t.children}))},!0),e.updateDB=function(){if(!is.empty(e.pageSelecting)){var n=[];_.each(e.pages,function(e){n.push(t.projectPage().update({projectId:r,pageId:e.id},e.attributes).$promise)}),i.all(n).then(function(e){swal("Successful!","Project was updated","success")}).catch(function(e){swal("Error!",angular.fromJson(e),"error")})}},e.setItemWithKey=function(e,t){var n=1;t.shiftKey||(u.listSelectItems=[],u.listSelectItems.push(e)),t.shiftKey&&(_.each(u.listSelectItems,function(t,a){t.$$hashKey===e.$$hashKey&&(n=0,u.listSelectItems[a]=null)}),u.listSelectItems=_.compact(u.listSelectItems),1==n&&u.listSelectItems.push(e))};var d={html:'<div class="text-info" style="cursor: pointer;margin-left: 5px;"><h4><i class="fa fa-files-o" aria-hidden="true"></i> Copy</h4></div>',enabled:function(){return!0},click:function(){var e=!1;_.each(u.listSelectItems,function(t){t.$$hashKey==u.value.$$hashKey&&(e=!0)}),e?(u.saveDB=angular.copy(u.listSelectItems),u.listSelectItems=[]):(u.listSelectItems=[],u.listSelectItems.push(u.value),u.saveDB=angular.copy(u.listSelectItems),u.listSelectItems=[])}},p={html:'<div style="cursor: no-drop;margin-left: 5px;color: #777777"><h4><i class="fa fa fa-clipboard" aria-hidden="true"></i> Paste</h4></div>',enabled:function(){return!0},click:function(){return!1}},g={html:'<div class="text-success" style="cursor: pointer;margin-left: 5px;"><h4><i class="fa fa fa-clipboard" aria-hidden="true"></i> Paste</h4></div>',enabled:function(){return!0},click:function(){_.each(u.saveDB,function(e){"stacked"===u.value.type?u.value.children[0].children.push(e):u.list.push(e)})}},f={html:'<div class="text-danger" style="cursor: pointer;margin-left: 5px;"><h4><i class="fa fa-minus-square" aria-hidden="true"></i> Delete</h4></div>',enabled:function(){return!0},click:function(){u.list.splice(u.index,1)}};e.menuOptions=function(e,t,n){return u.list=e,u.index=t,u.value=n,[d,u.saveDB.length>0?g:p,null,f]},e.loadTables=function(){t.project().tables({id:r}).$promise.then(function(t){e.designPage_tables=t.data}).catch(function(e){swal("Error!",angular.toJson(e),"error")})},e.getTable=function(n){e.table=n,e.nameInstables={name:""},"table_instances"===n.type?t.project().loadColumnInstanceTables({id:r,page_id:e.pageSelecting.id,instanceTableId:n.id}).$promise.then(function(t){e.designPage_columns=t.included}).catch(function(e){}):t.project().columns({id:r,tableID:e.table.id}).$promise.then(function(t){e.designPage_columns=t.data}).catch(function(e){})},e.deleteSelectedInstanceTable=function(){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1,html:!1},function(){t.project().deleteInstanceTable({id:r,page_id:e.pageSelecting.id,instanceTableId:e.currentInstanceTable.id}).$promise.then(function(){e.instanceTables[e.instanceTableIndex]=null,e.instanceTables=_.compact(e.instanceTables),e.designPage_columnInstanceTables=[],e.currentInstanceTable=void 0,e.instanceTableIndex=void 0,swal("Success!","Successfully deleted table","success")}).catch(function(e){})})},e.loadColumnFromInstanceTable=function(n,a){e.instanceTableIndex=a,t.project().loadColumnInstanceTables({id:r,page_id:e.pageSelecting.id,instanceTableId:n}).$promise.then(function(t){e.currentInstanceTable=t.data,e.designPage_columnInstanceTables=t.included}).catch(function(e){})},o.loadPictures(r).then(function(t){e.pictures=t}).catch(function(e){swal("Error!",angular.toJson(e),"error")}),e.loadUrl=function(e){return l.API+e},e.setDataModel=function(e){e.model=e.content},e.hasRole=function(e,t){return _.find(t,function(t){return t==e.id})},e.addRole=function(e,t){t.push(e.id)},e.removeRole=function(e,t){var n=_.findIndex(t,function(t){return t==e.id});n>=0&&t.splice(n,1)},e.testModel=function(){console.log(e.models.selected)}}])}();
!function(){angular.module("app").controller("EditProjects",["$scope","api","Auth","Router","$stateParams",function(t,e,o,r,n){var p=n.id;t.format="yyyy-MM-dd",t.project={},t.popup1={opened:!1},t.popup2={opened:!1},t.open1=function(){t.popup1.opened=!0},t.open2=function(){t.popup2.opened=!0},e.client().get().$promise.then(function(e){t.clients=e.data}),e.project().get({id:p}).$promise.then(function(e){t.project=e.data.attributes,t.project.client_id=e.data.relationships.client.data.id,t.project.period_end_date=new Date(t.project.period_end_date),t.project.period_start_date=new Date(t.project.period_start_date)}).catch(function(t){swal("Error!",angular.toJson(t),"error")}),t.formAction=function(o){e.project().update({id:p},{project:t.project}).$promise.then(function(t){swal("Successful!","the project was updated","success"),console.log(t),r.toProjects()}).catch(function(t){swal("Error!",angular.toJson(t),"error")})}}])}();
!function(){angular.module("app").controller("RoleProjects",["$scope","api","Auth","Router","$stateParams",function(e,o,t,r,n){e.projectId=n.projectId,e.roles=[{name:""}],e.addMore=function(o){is.not.empty(o.name)&&e.roles.push({name:""})},e.removeItem=function(o){o>0&&e.roles.splice(o,1)},e.createRole=function(){var t=[];_.each(e.roles,function(e){is.not.empty(e.name)&&t.push(e.name)});var n=t.join(",");is.not.empty(n)&&o.project().createRole({id:e.projectId,roles:n}).$promise.then(function(o){swal("Successful!","Roles were created","success"),console.log(o),r.toProjectDetail({id:e.projectId})}).catch(function(e){swal("Error!",angular.toJson(e),"error")})}}])}();
!function(){angular.module("app").controller("ShowProjects",["$scope","api","Auth","Router","$stateParams",function(t,e,o,r,n){function i(){var o=t.project.attributes.role;e.project().userRole({id:a}).$promise.then(function(e){console.log(e);var r=e.data;_.each(r,function(e){var r=[],n=e.relationships.role_types;_.each(n.data,function(t){var e=_.find(o,function(e){return e.id==t.id});r.push(e)}),n.data=r,t.listUserBelongProject.push(e)})}).catch(function(t){swal("Error!",angular.toJson(t),"error")})}var a=n.id;t.listUserBelongProject=[],e.project().get({id:a}).$promise.then(function(e){var o=e.data,r=e.included;t.project={id:o.id,attributes:{name:o.attributes.name,patitent_num:o.attributes.patitent_num,progress:0/o.attributes.patitent_num,period_start_date:o.attributes.period_start_date,period_end_date:o.attributes.period_end_date,role:r}},i()}),t.deleteRole=function(o,r){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1,html:!1},function(){e.project().deleteRole({id:a,roleId:o.id}).$promise.then(function(e){swal("Successful!","the role was deleted from project","success"),console.log(e),t.project.attributes.role.splice(r,1)}).catch(function(t){swal("Error!",angular.toJson(t),"error"),console.log(t)})})},t.deleteUser=function(o,r,n,i){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1,html:!1},function(){e.project().projectRoles({id:a}).$promise.then(function(s){_.each(s.data,function(s){s.relationships.role_type.data.id===n.id&&s.relationships.user.data.id===o.id&&e.project().deleteUserRole({id:a,roleId:s.id}).$promise.then(function(){o.relationships.role_types.data.splice(r,1),0==o.relationships.role_types.data.length&&(t.listUserBelongProject.splice(i,1),swal("Successful!","the user was deleted role from project","success"))}).catch(function(t){swal("Error!",angular.toJson(t),"error")})})}).catch(function(t){swal("Error!",angular.toJson(t),"error")})})}}])}();
!function(){angular.module("app").controller("TableProjects",["$scope","api","Auth","Router","$stateParams","$uibModal",function(e,t,n,l,o,a){e.listColumnToDelete=[],e.listTableToDelete=[],e.clickOneTable=!1,e.clickOneColumn=!1,e.columnAdd={attributes:{name:"",content_type:"",condition:"",required:!1}},e.projectId=o.id,e.newTable={attributes:{name:""}};var i=function(){t.project().tables({id:e.projectId}).$promise.then(function(t){e.tables=t}).catch(function(e){swal("Error!",angular.toJson(e),"error")})};e.getTable=function(t){e.tableNameTemp=t.attributes.name,e.isUpdateTable=!0,e.newTable=angular.copy(t)},e.updateTable=function(n){var l=0;_.each(e.tables.data,function(t){"use strict";e.tableNameTemp!=n.attributes.name&&t.attributes.name===n.attributes.name&&(swal("Error!","This table has been already created before","error"),l=1)}),0==l&&t.project().updateTable({id:e.projectId,tableID:n.id,name:n.attributes.name}).$promise.then(function(){swal("Success!","Successfully Updated Table","success"),e.newTable={attributes:{}},i()}).catch(function(e){swal("Error!",angular.toJson(e),"error")})},e.addNewTable=function(n){var l=0;_.each(e.tables.data,function(e){"use strict";e.attributes.name===n.attributes.name&&(swal("Error!","This table has been already created before","error"),l=1)}),0==l&&t.project().addTables({id:e.projectId,name:n.attributes.name}).$promise.then(function(){e.newTable.attributes.name="",i()}).catch(function(e){swal("Error!",angular.toJson(e),"error")})},e.addToListTableToDelete=function(t){e.clickOneTable=!0;var n=1;_.each(e.listTableToDelete,function(l,o){l.id===t.id&&(n=0,e.listTableToDelete[o]=null)}),e.listTableToDelete=_.compact(e.listTableToDelete),1==n&&e.listTableToDelete.push({id:t.id})},e.deleteAllTable=function(){return e.clickOneTable&&e.listTableToDelete.length>0?(e.listTableToDelete=[],_.each(e.tables.data,function(t){e.listTableToDelete.push({id:t.id})}),e.clickOneTable=!1,!1):!e.clickOneTable&&e.listTableToDelete.length>0?(e.listTableToDelete=[],!1):void(e.clickOneTable||0!=e.listTableToDelete.length||_.each(e.tables.data,function(t){e.listTableToDelete.push({id:t.id})}))},e.deleteTables=function(){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1,html:!1},function(){var n=[];_.each(e.listTableToDelete,function(l){"use strict";n.push(new Promise(function(n,o){t.project().deleteTable({id:e.projectId,tableID:l.id}).$promise.then(function(){e.addToListTableToDelete(l),n(!0)}).catch(function(e){o(!1)})}))}),Promise.all(n).then(function(){e.newTable={attributes:{}},e.tableChecked="",swal("Success!","Successfully Deleted Table","success"),e.clickOneTable=!1,i()}).catch(function(){swal("Error!","Have some errors when deleting","error")})})},e.loadColumns=function(n){e.tableID=n,e.listColumnToDelete=[],e.columnAdd={attributes:{name:"",content_type:"",condition:"",required:!1}},e.isUpdate=!1,t.project().columns({id:e.projectId,tableID:n}).$promise.then(function(t){e.columns=t.data}).catch(function(e){})},e.resetField=function(){"use strict";e.columnAdd={attributes:{}},e.newTable={attributes:{}},e.isUpdateTable=!1,e.isUpdate=!1},e.validation=function(e){return e.attributes.name&&e.attributes.content_type},e.addNewColumn=function(n){console.log(n.attributes.required);var l=1;_.each(e.columns,function(e){"use strict";e.attributes.name===n.attributes.name&&(swal("Error!","This Column has been already created before","error"),l=0)}),1==l&&(e.validation(n)?t.project().addColumn({id:e.projectId,tableID:e.tableID,name:n.attributes.name,content_type:n.attributes.content_type,condition:n.attributes.condition,required:!1}).$promise.then(function(t){e.columns.push(t.data),e.columnAdd={attributes:{}}}).catch(function(e){swal("Error!",angular.toJson(e),"error")}):swal("Error!","Some Fields Is Missing","error"))},e.addToListColumnToDelete=function(t){e.clickOneColumn=!0;var n=1;_.each(e.listColumnToDelete,function(l,o){l.id===t.id&&(n=0,e.listColumnToDelete[o]=null)}),e.listColumnToDelete=_.compact(e.listColumnToDelete),1==n&&e.listColumnToDelete.push({id:t.id})},e.deleteAllColumn=function(){return e.clickOneColumn&&e.listColumnToDelete.length>0?(e.listColumnToDelete=[],_.each(e.columns,function(t){e.listColumnToDelete.push({id:t.id})}),e.clickOneColumn=!1,!1):!e.clickOneColumn&&e.listColumnToDelete.length>0?(e.listColumnToDelete=[],!1):void(e.clickOneColumn||0!=e.listColumnToDelete.length||_.each(e.columns,function(t){e.listColumnToDelete.push({id:t.id})}))},e.deleteColumns=function(){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1,html:!1},function(){var n=[];_.each(e.listColumnToDelete,function(l){"use strict";n.push(new Promise(function(n,o){t.project().deleteColumn({id:e.projectId,tableID:e.tableID,columnID:l.id}).$promise.then(function(){e.addToListColumnToDelete(l),n(!0)}).catch(function(e){o(!1)})}))}),Promise.all(n).then(function(){e.columnChecked="",e.clickOneColumn=!1,swal("Success!","Successfully Deleted Columns","success"),e.loadColumns(e.tableID)}).catch(function(){swal("Error!","Have some errors when deleting","error")})})},e.getColumn=function(t){e.columnNameTemp=t.attributes.name,e.isUpdate=!0,e.columnAdd=angular.copy(t)},e.updateColumn=function(n,l){var o=1;_.each(e.columns,function(t){"use strict";l.attributes.name!=e.columnNameTemp&&t.attributes.name===l.attributes.name&&(swal("Error!","This Column has been already created before","error"),o=0)}),1==o&&(e.validation(l)?t.project().updateColumn({id:e.projectId,tableID:n,columnID:l.id,name:l.attributes.name,content_type:l.attributes.content_type,condition:l.attributes.condition,required:!1}).$promise.then(function(){e.loadColumns(n),e.columnAdd={attributes:{}},e.isUpdate=!1,swal("Success!","Successfully Updated Column","success")}).catch(function(e){swal("Error!",angular.toJson(e),"error")}):swal("Error!","Some fields can not be blank","error"))},i()}])}();
!function(){angular.module("app").controller("UploadProjects",["$scope","api","Auth","Router","Upload","CONSTANT","$stateParams",function(o,e,n,t,r,i,c){o.pictures=[];var l=c.id,a=o.uploader=r.init(i.API+"/api/v1/admin/projects/"+l+"/pictures"),s=function(){e.project().pictures({id:l}).$promise.then(function(e){o.pictures=e.data}).catch(function(o){swal("Error!",angular.toJson(o),"error")})};a.filters.push({name:"imageFilter",fn:function(o,e){var n="|"+o.type.slice(o.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(n)!==-1}}),a.onWhenAddingFileFailed=function(o,e,n){console.info("onWhenAddingFileFailed",o,e,n)},a.onBeforeUploadItem=function(o){o.formData.push({name:o.file.name}),console.info("onBeforeUploadItem",o)},a.onErrorItem=function(o,e,n,t){console.info("onErrorItem",o,e,n,t)},a.onCompleteAll=function(){console.info("onCompleteAll"),s()},o.deleteItem=function(n,t){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1,html:!1},function(){e.project().destroyPictures({id:l,pictureId:n.id}).$promise.then(function(e){console.log(e),swal("Successful!","the image was deleted from system","success"),o.pictures.splice(t,1)}).catch(function(o){swal("Error!",angular.toJson(o),"error")})})},o.loadUrl=function(o){return i.API+o},s()}])}();
!function(){angular.module("app").controller("UserRoleProjects",["$scope","api","Auth","Router","$stateParams","$http","CONSTANT","util",function(e,r,s,t,n,o,a,i){function u(){r.user().get().$promise.then(function(r){e.total=parseInt(i.getUrlVars(r.links.last)["page[number]"])*parseInt(i.getUrlVars(r.links.last)["page[size]"]),_.each(r.data,function(r){var s=e.isAdded(r);e.usersNotInTypes.push({isDone:s,user:r})})}).catch(function(e){swal("Error!",angular.toJson(e),"error")})}e.projectId=n.projectId,e.roleTypeId=n.roleId,e.usersNotInTypes=[],e.usersInTypes=[],e.searchCriteriaUser=" ",e.total,e.maxSize=10,e.currentPage=1,function(){r.project().userInRoleType({id:e.projectId,roleId:e.roleTypeId}).$promise.then(function(r){_.each(r.data,function(r){var s=r.relationships.roles.data[0];e.usersInTypes.push({role_id:s.id,user:r})}),u()}).catch(function(e){swal("Error!",angular.toJson(e),"error")})}(),e.addRole=function(s,t){var n=[{user_id:s.user.id,role_type_id:e.roleTypeId}];r.project().addUserRole({id:e.projectId,roles:n}).$promise.then(function(r){_.each(r.data,function(r){e.usersInTypes.push({role_id:r.id,user:s.user})}),e.usersNotInTypes[t].isDone=!0}).catch(function(e){swal("Error!",angular.toJson(e),"error")})},e.loadPage=function(r){e.usersNotInTypes=[],o.get(a.API+"/api/v1/admin/users?page[number]="+r+"&page[size]=10").then(function(r){_.each(r.data.data,function(r){var s=e.isAdded(r);e.usersNotInTypes.push({isDone:s,user:r})})})},e.deleteUser=function(s,t){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1,html:!1},function(){r.project().deleteUserRole({id:e.projectId,roleId:s.role_id}).$promise.then(function(r){swal("Successful!","the project was deleted from system","success"),_.each(e.usersNotInTypes,function(e){e.user.id==s.user.id&&(e.isDone=!1)}),e.usersInTypes.splice(t,1)}).catch(function(e){swal("Error!",angular.toJson(e),"error")})})},e.isAdded=function(r){return _.find(e.usersInTypes,function(e){return e.user.id==r.id})},e.searchUser=function(){var r=[];o.get(a.API+"/api/v1/admin/users/search?q="+e.searchCriteriaUser).then(function(s){e.total=parseInt(i.getUrlVars(s.data.links.last)["page[number]"])*parseInt(i.getUrlVars(s.data.links.last)["page[size]"]),_.each(s.data.data,function(s){var t=e.isAdded(s);r.push({isDone:t,user:s}),e.usersNotInTypes=r})})},e.$watch("searchCriteriaUser",function(r){""===r&&(e.usersNotInTypes=[],u())})}])}();